@startuml
' --- PENGATURAN TAMPILAN ---
left to right direction
skinparam shadowing false
skinparam componentStyle rectangle
' Menggunakan polyline supaya garis lebih luwes mencari jalan kosong
skinparam linetype polyline 
skinparam nodesep 100
skinparam ranksep 60

' Warna Konsisten
skinparam package {
    BackgroundColor<<Physical>> #FFE0B2
    BackgroundColor<<Edge>> #D1C4E9
    BackgroundColor<<Server>> #BBDEFB
    BackgroundColor<<Client>> #C8E6C9
    BorderColor Gray
}

title Architecture Diagram: Smart Mall Parking (Clean Version)

' --- DEFINISI KOMPONEN (LEVEL HIGH) ---

package "1. PARKIRAN (Physical Layer)" <<Physical>> {
    component "Kendaraan" as Car
    component "Sensor IR\n(Break Beam)" as Sensor
}

package "2. HARDWARE (IoT Layer)" <<Edge>> {
    ' Kita gabung visualnya supaya hemat tempat
    component "Microcontroller\n(Arduino + ESP8266)" as IoT
}

package "3. CLOUD SERVER (Backend Layer)" <<Server>> {
    ' Sederhanakan server menjadi satu blok logika
    component "Web Service / API\n(Node.js Logic)" as Backend
    database "Database\n(MySQL)" as DB
}

package "4. USER (Client Layer)" <<Client>> {
    component "Laptop Admin\n(Web Browser)" as Client
}

' --- ALUR RELASI (SATU ARAH MAJU) ---

' Alur 1: Mobil -> Sensor
Car -> Sensor : Deteksi

' Alur 2: Sensor -> IoT
Sensor -> IoT : Signal High/Low

' Alur 3: IoT -> Server (Jarak Jauh)
IoT ..> Backend : HTTP POST (JSON Data)\nVia Internet

' Alur 4: Internal Server (Simpan/Baca)
Backend <--> DB : Query & Save Data

' Alur 5: Server -> User
Backend --> Client : Tampilkan Dashboard

@enduml